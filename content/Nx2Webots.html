<!DOCTYPE html><html>
        <head>
        <title>cad2025</title>
        <meta charset="utf-8">
<meta property="head" content="H2">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/fonts/icomoon/style.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/bootstrap.min.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/magnific-popup.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/jquery-ui.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/owl.carousel.min.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/owl.theme.default.min.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/bootstrap-datepicker.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/fonts/flaticon/font/flaticon.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/aos.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/style.css">
        <link rel="shortcut icon" href="./../cmsimde/static/favicons.png">
        
        <style type='text/css'>
            .site-section {
            background-color: #FFFF;
            padding: 40px 40px;
            }
            body > div > div.dropdown.open {
                display: block;
            }
        </style>
    
        <!-- <script src="./../cmsimde/static/jquery.js"></script> -->
        <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
        <script src="../cmsimde/static/chimper/js/jquery-3.3.1.min.js"></script>
        <link rel="stylesheet" href="./../cmsimde/static/tipuesearch/css/normalize.min.css">
        <script src="./../cmsimde/static/tipuesearch/tipuesearch_set.js"></script>
        <script src="tipuesearch_content.js"></script>
        <link rel="stylesheet" href="./../cmsimde/static/tipuesearch/css/tipuesearch.css">
        <script src="./../cmsimde/static/tipuesearch/tipuesearch.js"></script>
        <!-- for Wink3 客製化關閉 -->
        <!--
        <link rel="stylesheet" type="text/css" href="./../cmsimde/static/winkPlayer.css" />
        <script type="text/javascript" src="./../cmsimde/static/winkPlayer.js"></script>
        -->
        <script>
            /* original tipuesearch
            $(document).ready(function() {
                 $('#tipue_search_input').tipuesearch();
            });
            */
            // customed doSearch
            function doSearch() {
                $('#tipue_search_input').tipuesearch({
                    newWindow: true, 
                    minimumLength: 2,
                    wholeWords: false, // for search 中文
                });
            }
            $(document).ready(doSearch);
        </script>
        
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shCore.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushBash.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushDiff.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushJScript.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushJava.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushPython.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushSql.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushHaxe.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushXml.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushPhp.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushPowerShell.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushLua.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushMojo.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushWbt.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushCpp.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushCss.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushCSharp.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushDart.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushRust.js"></script>
<link type="text/css" rel="stylesheet" href="./../cmsimde/static/syntaxhighlighter/css/shCoreDefault.css"/>
<script type="text/javascript">SyntaxHighlighter.all();</script>
<!-- 暫時不用
<script src="./../cmsimde/static/fengari-web.js"></script>
<script type="text/javascript" src="./../cmsimde/static/Cango-13v08-min.js"></script>
<script type="text/javascript" src="./../cmsimde/static/CangoAxes-4v01-min.js"></script>
<script type="text/javascript" src="./../cmsimde/static/gearUtils-05.js"></script>
-->
<!-- for Brython 暫時不用
<script src="https://scrum-3.github.io/web/brython/brython.js"></script>
<script src="https://scrum-3.github.io/web/brython/brython_stdlib.js"></script>
-->
<style>
img.add_border {
    border: 3px solid blue;
}
</style>

</head>
<body>
<div class='container'><nav>
        
    <div class="site-wrap">

    <div class="site-mobile-menu">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>
    
            <header class="site-navbar py-4 bg-white" role="banner">
              <div class="container">
                <div class="row align-items-center">
                <h1>cad2025 電腦輔助設計與實習</h1>
                <div class="pl-4">
                    <form>
                    <input type="text" placeholder="Search" name="q" id="tipue_search_input" pattern=".{2,}" title="At least 2 characters" required>
                    </form>
                </div>
                  <!-- <div class="col-11 col-xl-2">
                    <h1 class="mb-0 site-logo"><a href="index.html" class="text-black h2 mb-0">cad2025 電腦輔助設計與實習</a></h1> 
                  </div>
                  -->
                  <div class="col-12 col-md-10 d-none d-xl-block">
                    <nav class="site-navigation position-relative text-right" role="navigation">
    <ul class='site-menu js-clone-nav mr-auto d-none d-lg-block'>
                        <li class="active has-children"><a href="index.html">Home</a>
                        <ul class="dropdown">
                            <li><a href="sitemap.html">SMap</a></li>
                            <li><a href="./../reveal/index.html">reveal</a></li>
                            <li><a href="./../blog/index.html">blog</a></li>
                        </ul>
                      </li>
                     <li class='has-children'><a href='About.html'>About</a><ul class='dropdown'><li><a href='Mind-Map.html'>Mind-Map</a><li class='has-children'><a href='AI.html'>AI</a><ul class='dropdown'><li><a href='Teams.html'>Teams</a><li><a href='Prompts.html'>Prompts</a></li></ul><li class='has-children'><a href='Homework.html'>Homework</a><ul class='dropdown'><li><a href='HW2.html'>HW2</a><li><a href='Plotter.html'>Plotter</a></li></li></ul></ul><li class='has-children'><a href='Topics.html'>Topics</a><ul class='dropdown'><li><a href='Network.html'>Network</a><li><a href='ICMP.html'>ICMP</a><li><a href='IPv6.html'>IPv6</a><li><a href='DNS.html'>DNS</a><li><a href='Proxy.html'>Proxy</a><li class='has-children'><a href='Web.html'>Web</a><ul class='dropdown'><li><a href='Codespaces.html'>Codespaces</a></li></li></ul></ul><li class='has-children'><a href='Software.html'>Software</a><ul class='dropdown'><li><a href='Git.html'>Git</a><li class='has-children'><a href='CMSiMDE.html'>CMSiMDE</a><ul class='dropdown'><li><a href='Flask.html'>Flask</a></li></ul><li class='has-children'><a href='Solvespace.html'>Solvespace</a><ul class='dropdown'><li><a href='Compile.html'>Compile</a></li></ul><li class='has-children'><a href='NX.html'>NX</a><ul class='dropdown'><li><a href='NX2312.html'>NX2312</a><li><a href='License.html'>License</a><li><a href='NX2506.html'>NX2506</a></li></ul><li><a href='Onshape.html'>Onshape</a><li class='has-children'><a href='Webots.html'>Webots</a><ul class='dropdown'><li><a href='Fourbar.html'>Fourbar</a><li><a href='TimeStep.html'>TimeStep</a><li><a href='Clouds.html'>Clouds</a><li><a href='Talks.html'>Talks</a><li><a href='Blender.html'>Blender</a><li><a href='Ardupilot.html'>Ardupilot</a></li></li></ul></ul><li class='has-children'><a href='Tutorial.html'>Tutorial</a><ul class='dropdown'><li class='has-children'><a href='Stage1.html'>Stage1</a><ul class='dropdown'><li><a href='Tutorial1.html'>Tutorial1</a><li><a href='Tutorial2.html'>Tutorial2</a></li></ul><li class='has-children'><a href='Stage2.html'>Stage2</a><ul class='dropdown'><li><a href='Tutorial3.html'>Tutorial3</a><li><a href='Distancesensor.html'>Distancesensor</a><li><a href='Tutorial4.html'>Tutorial4</a><li><a href='Tutorial5.html'>Tutorial5</a></li></ul><li class='has-children'><a href='Stage3.html'>Stage3</a><ul class='dropdown'><li><a href='Tutorial6.html'>Tutorial6</a><li><a href='Tutorial7.html'>Tutorial7</a><li><a href='Stream.html'>Stream</a><li><a href='Webots Server.html'>Webots Server</a></li></ul><li><a href='Nx2Webots.html'>Nx2Webots</a></li></ul><li class='has-children'><a href='Projects.html'>Projects</a><ul class='dropdown'><li><a href='Control.html'>Control</a><li><a href='Printer.html'>Printer</a><li><a href='Otto.html'>Otto</a><li class='has-children'><a href='Otto_ninja-1.html'>Otto_ninja-1</a><ul class='dropdown'><li><a href='Simplify.html'>Simplify</a></li></ul><li><a href='OpenDuck.html'>OpenDuck</a><li><a href='Pupper.html'>Pupper</a><li><a href='JetAcker.html'>JetAcker</a></li></ul><li><a href='Brython.html'>Brython</a><li><a href='w3.html'>w3</a><li><a href='w7.html'>w7</a><li><a href='w10.html'>w10</a><li><a href='w17.html'>w17</a><li><a href='w18.html'>w18</a><li><a href='(3D模型).html'>(3D模型)</a><li><a href='期末影片.html'>期末影片</a><li class='has-children'><a href='Ref.html'>Ref</a><ul class='dropdown'><li class='has-children'><a href='Reeborg.html'>Reeborg</a><ul class='dropdown'><li><a href='ex1.html'>ex1</a><li><a href='Otto_ninja-2.html'>Otto_ninja-2</a></li></ul><li><a href='Pyodide.html'>Pyodide</a><li><a href='Pyodide_ex.html'>Pyodide_ex</a><li class='has-children'><a href='Pyodide2.html'>Pyodide2</a><ul class='dropdown'><li><a href='robot.py.html'>robot.py</a><li><a href='Example2.html'>Example2</a></li></ul><li class='has-children'><a href='Pyodide3.html'>Pyodide3</a><ul class='dropdown'><li><a href='png_files.html'>png_files</a><li><a href='Harvest.html'>Harvest</a></li>
                      </ul>
                </nav>
              </div>
              <div class="d-inline-block d-xl-none ml-md-0 mr-auto py-3" style="position: relative; top: 3px;"><a href="#" class="site-menu-toggle js-menu-toggle text-black"><span class="icon-menu h3"></span></a></div>
              </div>

            </div>
          </div>
          
        </header>
    <div id="tipue_search_content">Webots Server << <a href='Webots Server.html'>Previous</a> <a href='Projects.html'>Next</a> >> Projects<br /><h1>Nx2Webots</h1>
<p><a href="https://wiki.ros.org/urdf/Tutorials">https://wiki.ros.org/urdf/Tutorials</a> </p>
<p><a href="https://github.com/cyberbotics/urdf2webots">https://github.com/cyberbotics/urdf2webots</a> </p>
<p>It's feasible to create a custom tool using <strong>NXOpen Python API</strong> to export a Siemens NX assembly into a Webots-compatible format, including joint information from assembly constraints (mates). However, there is <strong>no built-in or official exporter</strong> for this, so the tool would be fully custom-written. The most practical approach is to generate an intermediate <strong>URDF</strong> file (which includes meshes, hierarchy, and joints), then use Cyberbotics' open-source <strong>urdf2webots</strong> converter to produce a Webots <strong>PROTO</strong> file (recommended for reusable robot models) or directly a Robot node string for a .wbt world.</p>
<h4 id="step-by-step-approach-to-build-the-tool">Step-by-Step Approach to Build the Tool</h4>
<ol>
<li>
<p><strong>Set Up NXOpen Python Environment</strong>:</p>
<ul>
<li>Run scripts inside NX (via File &gt; Execute &gt; NX Open Python) or as journals.</li>
<li>Import modules: <code>import NXOpen</code>, <code>import NXOpen.Assemblies</code>, <code>import NXOpen.Positioning</code>, <code>import NXOpen.UF</code>, etc.</li>
<li>Access the displayed assembly: <code>theSession = NXOpen.Session.GetSession()</code>; <code>displayPart = theSession.Parts.Display</code>; <code>componentAssembly = displayPart.ComponentAssembly</code>.</li>
</ul>
</li>
<li>
<p><strong>Traverse the Assembly Hierarchy</strong>:</p>
<ul>
<li>Use a recursive function to walk the component tree:
<pre><code class="lang-python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> List
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_all_components</span><span class="hljs-params">(root: NXOpen.Assemblies.Component)</span> -&gt; List[NXOpen.Assemblies.Component]:</span>
    components = [root]
    <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> root.GetChildren():
        components.extend(get_all_components(child))
    <span class="hljs-keyword">return</span> components
<span class="hljs-comment"># Start from root</span>
root_comp = componentAssembly.RootComponent
all_comps = get_all_components(root_comp)
</code></pre>
</li>
<li>For each component: Get prototype part (<code>comp.Prototype</code>), position/orientation (<code>comp.Position</code> or matrix), name, etc.</li>
<li>Identify the "base" link (usually the root or fixed part).</li>
</ul>
</li>
<li>
<p><strong>Export Meshes for Links</strong>:</p>
<ul>
<li>For each unique prototype part (link), export visual/collision meshes.</li>
<li>Preferred formats: STL (simple, supported in URDF) or OBJ/DAE (better materials, via intermediate if needed).</li>
<li>Use UF functions for STL export (common in journals):
<pre><code class="lang-python">ufSession = NXOpen.UF.UFSession.GetUFSession()
<span class="hljs-comment"># Collect solid bodies in the part</span>
<span class="hljs-keyword">bodies </span>= part.<span class="hljs-keyword">Bodies.ToArray()
</span>for <span class="hljs-keyword">body </span>in <span class="hljs-keyword">bodies:
</span>    ufSession.Std.PutSolidInStlFile(file_handle, NXOpen.Tag.Null, <span class="hljs-keyword">body.Tag, </span>tolerance, <span class="hljs-number">0</span>.<span class="hljs-number">0</span>, <span class="hljs-number">0</span>.<span class="hljs-number">0</span>, num_errors, errors)
</code></pre>
</li>
<li>Export each link as a separate mesh file (e.g., <code>link_name_visual.stl</code>) to a output folder.</li>
<li>For collision, use simplified meshes or the same as visual.</li>
<li>Compute inertia/mass if possible (NXOpen has mass properties APIs).</li>
</ul>
</li>
<li>
<p><strong>Extract Joint Information from Constraints</strong>:</p>
<ul>
<li>NX assembly constraints are accessible via <code>NXOpen.Positioning.Constraint</code> and <code>ComponentConstraint</code>.</li>
<li>For each component: <code>constraints = comp.GetConstraints()</code> (or from Positioner).</li>
<li>Analyze constraint type (<code>constraint.ConstraintType</code>): e.g., TouchAlign, Concentric, Distance, Angle → map to URDF joint types:
<ul>
<li>Concentric/Cylindrical → revolute or continuous.</li>
<li>Slider/Linear → prismatic.</li>
<li>Fixed → fixed.</li>
<li>Ball/InPlane → ball or planar (limited in Webots).</li>
</ul>
</li>
<li>Determine parent/child links, joint origin (from constraint geometry), axis (from alignment vectors).</li>
<li>This is the most complex part: Constraints are between geometry (faces, edges, datums), not directly "joints" like in URDF. You'll need logic to infer DOF, axis, limits (from constraint expressions).</li>
<li>If the assembly uses Motion joints (requires Mechanisms license), use <code>NXOpen.Motion</code> APIs for explicit joints/links.</li>
</ul>
</li>
<li>
<p><strong>Generate URDF XML</strong>:</p>
<ul>
<li>Write a .urdf file using Python string templates or xml library.</li>
<li>Structure:
<ul>
<li><code>&lt;robot name="..."&gt;</code></li>
<li><code>&lt;link name="base_link"&gt; &lt;visual&gt; &lt;mesh filename="base.stl"/&gt; &lt;/visual&gt; ... &lt;/link&gt;</code></li>
<li><code>&lt;joint name="..." type="revolute"&gt; &lt;parent link="base"/&gt; &lt;child link="arm"/&gt; &lt;origin xyz="..." rpy="..."/&gt; &lt;axis xyz="..."/&gt; &lt;limit .../&gt; &lt;/joint&gt;</code></li>
</ul>
</li>
<li>Convert NX positions/matrices to URDF origin (xyz + roll-pitch-yaw).</li>
<li>Add inertial if computed.</li>
</ul>
</li>
<li>
<p><strong>Convert to Webots</strong>:</p>
<ul>
<li>Run the external tool: <code>python urdf2webots.py --input=my_robot.urdf --output=my_robot.proto</code></li>
<li>Options: Specify base translation/rotation, joint limits scaling, etc.</li>
<li>The resulting .proto file can be inserted into a Webots world as a reusable robot model.</li>
<li>For a one-off world, use <code>--output-inline</code> to get a Robot node string and paste into .wbt.</li>
</ul>
</li>
</ol>
<h4 id="challenges-and-tips">Challenges and Tips</h4>
<ul>
<li><strong>Joint Mapping Accuracy</strong>: NX constraints are positioning mates, not always kinematic joints. Complex/multi-DOF constraints may need manual rules or simplification. Test with simple assemblies first (e.g., revolute from concentric + align).</li>
<li><strong>Coordinate Systems</strong>: NX uses absolute CSYS; URDF/Webots use chain from base. Ensure consistent units (meters in Webots/URDF).</li>
<li><strong>Performance</strong>: In Webots, use simplified boundingObjects (primitives) instead of mesh collisions.</li>
<li><strong>Alternatives if URDF is Too Hard</strong>:
<ul>
<li>Directly generate Webots PROTO text: Recreate hierarchy with Solid/Transform/CadShape nodes, HingeJoint/SliderJoint for inferred joints.</li>
<li>But URDF route is cleaner and leverages existing converter.</li>
</ul>
</li>
<li><strong>Testing</strong>: Start with a simple 2-link arm assembly in NX. Export manually first, then automate.</li>
<li>Resources: NXOpen Python docs (Siemens site), example journals on GitHub (search "NXOpen assembly traverse"), urdf2webots repo.</li>
</ul>
<p>This would result in a powerful custom exporter script. If your assemblies use Motion Simulation joints explicitly, it's easier. For pure assembly constraints, expect some custom logic for joint inference. If you share a sample assembly structure, more specific code snippets could help!</p><br />Webots Server << <a href='Webots Server.html'>Previous</a> <a href='Projects.html'>Next</a> >> Projects</div>
        
    <!-- footer -->
      <div class="container">
        <div class="row pt-3 mx-auto">
            <p>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank" >Colorlib</a>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
        </div>
      </div>
    <!-- for footer -->
    
        </div> <!-- for site wrap -->
            <!-- <script src="../cmsimde/static/chimper/js/jquery-3.3.1.min.js"></script> -->
            <script src="../cmsimde/static/chimper/js/jquery-migrate-3.0.1.min.js"></script>
            <script src="../cmsimde/static/chimper/js/jquery-ui.js"></script>
            <script src="../cmsimde/static/chimper/js/popper.min.js"></script>
            <script src="../cmsimde/static/chimper/js/bootstrap.min.js"></script>
            <script src="../cmsimde/static/chimper/js/owl.carousel.min.js"></script>
            <script src="../cmsimde/static/chimper/js/jquery.stellar.min.js"></script>
            <script src="../cmsimde/static/chimper/js/jquery.countdown.min.js"></script>
            <script src="../cmsimde/static/chimper/js/jquery.magnific-popup.min.js"></script>
            <script src="../cmsimde/static/chimper/js/bootstrap-datepicker.min.js"></script>
            <script src="../cmsimde/static/chimper/js/aos.js"></script>
            <!--
            <script src="../cmsimde/static/chimper/js/typed.js"></script>
                    <script>
                    var typed = new Typed('.typed-words', {
                    strings: ["Web Apps"," WordPress"," Mobile Apps"],
                    typeSpeed: 80,
                    backSpeed: 80,
                    backDelay: 4000,
                    startDelay: 1000,
                    loop: true,
                    showCursor: true
                    });
                    </script>
            -->
            <script src="../cmsimde/static/chimper/js/main.js"></script>
        
<!-- 啟用 LaTeX equations 編輯 -->
  <!-- <script>
  MathJax = {
    tex: {inlineMath: [['$', '$'], ['\(', '\)']]}
  };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>-->
    </body></html>
        